{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v2",
        "update_url": "https:\/\/pterodactyleggs.com\/egg\/6735ff6d4924a4e9bbcc2743\/download\/egg-subnautica.json"
    },
    "exported_at": "2025-11-07T15:36:35+01:00",
    "name": "Subnautica",
    "author": "ptero@redbananaofficial.com",
    "description": "Subnautica is an open world survival action-adventure video game developed and published by Unknown Worlds Entertainment. In it, players are free to explore the ocean on an alien planet, known as planet 4546B, after their spaceship, the Aurora, crashes on the planet's surface.\r\n\r\nNote: NitroxMod version >=1.8.0.0 is required",
    "features": [
        "steam_disk_space"
    ],
    "docker_images": {
        "ghcr.io\/ptero-eggs\/yolks:dotnet_9": "ghcr.io\/ptero-eggs\/yolks:dotnet_9"
    },
    "file_denylist": [],
    "startup": "export HOME=\/home\/container; .\/Nitrox\/NitroxServer-Subnautica --save {{SAVE_NAME}}",
    "config": {
        "files": "{\r\n    \"\/.config\/Nitrox\/server.cfg\": {\r\n        \"parser\": \"properties\",\r\n        \"find\": {\r\n            \"ServerPort\": \"{{server.build.default.port}}\",\r\n            \"SaveInterval\": \"{{server.build.env.SAVE_INTERVAL}}\",\r\n            \"DisableAutoSave\": \"{{server.build.env.SAVE_DISABLE}}\",\r\n            \"SaveName\": \"{{server.build.env.SAVE_NAME}}\",\r\n            \"ServerPassword\": \"{{server.build.env.SUBNAUTICA_PASSWORD}}\",\r\n            \"AdminPassword\": \"{{server.build.env.SUBNAUTICA_ADMIN_PASSWORD}}\",\r\n            \"GameMode\": \"{{server.build.env.SERVER_MODE}}\",\r\n            \"AutoPortForward\": \"{{server.build.env.PORTFORWARD_ENABLE}}\",\r\n            \"SerializerMode\": \"{{server.build.env.SERIALIZER_MODE}}\"\r\n        }\r\n    }\r\n}",
        "startup": "{\r\n    \"done\": \"Server started\"\r\n}",
        "logs": "{}",
        "stop": "^C"
    },
    "scripts": {
        "installation": {
            "script": "#!\/bin\/bash\r\n# ====================================================\r\n# Nitrox Server Installer for Subnautica \r\n# ====================================================\r\n\r\nset -e\r\n\r\n# -----------------------------\r\n#  Dependency setup\r\n# -----------------------------\r\ndpkg --add-architecture i386\r\napt update\r\napt -y --no-install-recommends install curl jq unzip libstdc++6 ca-certificates libsdl2-2.0-0:i386\r\n\r\n# -----------------------------\r\n#  Repository and version setup\r\n# -----------------------------\r\nGITHUB_PACKAGE=\"SubnauticaNitrox\/Nitrox\"\r\nVERSION=\"${NITROX_VERSION:-latest}\"\r\n\r\nLATEST_JSON=$(curl --silent \"https:\/\/api.github.com\/repos\/${GITHUB_PACKAGE}\/releases\/latest\")\r\nRELEASES=$(curl --silent \"https:\/\/api.github.com\/repos\/${GITHUB_PACKAGE}\/releases\")\r\n\r\n# -----------------------------\r\n#  Detect architecture\r\n# -----------------------------\r\n_arch=$(uname -m)\r\ncase \"${_arch}\" in\r\n  x86_64|amd64) ARCH_TAG=\"linux_x64\"; FORCE_ARCH=\"x64\";;\r\n  aarch64|arm64) ARCH_TAG=\"linux_arm64\"; FORCE_ARCH=\"arm64\";;\r\n  *) ARCH_TAG=\"linux_x64\"; FORCE_ARCH=\"x64\";;\r\nesac\r\necho \"Detected architecture: ${_arch} (forcing asset match: ${FORCE_ARCH})\"\r\n\r\n# -----------------------------\r\n#  Asset URL selector\r\n# -----------------------------\r\nselect_asset_url() {\r\n  local json=\"$1\"\r\n  local arch=\"$2\"\r\n  local url\r\n  url=$(echo \"$json\" | jq -r --arg arch \"$arch\" '.assets[] | select(.name | test($arch; \"i\")) | .browser_download_url' | head -n1)\r\n  [ -z \"$url\" ] && url=$(echo \"$json\" | jq -r '.assets[] | select(.name | test(\"nitrox|linux|server\"; \"i\")) | .browser_download_url' | head -n1)\r\n  [ -z \"$url\" ] && url=$(echo \"$json\" | jq -r '.assets[0].browser_download_url')\r\n  printf \"%s\" \"$url\"\r\n}\r\n\r\n# -----------------------------\r\n#  Pick version\r\n# -----------------------------\r\nif [ \"${VERSION}\" == \"latest\" ]; then\r\n  RELEASE_JSON=\"${LATEST_JSON}\"\r\nelse\r\n  RELEASE_JSON=$(echo \"${RELEASES}\" | jq -c --arg VERSION \"$VERSION\" '.[] | select(.tag_name == $VERSION)')\r\n  [ -z \"$RELEASE_JSON\" ] && RELEASE_JSON=\"${LATEST_JSON}\"\r\nfi\r\nDOWNLOAD_URL=$(select_asset_url \"$RELEASE_JSON\" \"$FORCE_ARCH\")\r\n\r\n# -----------------------------\r\n#  Debug info\r\n# -----------------------------\r\necho \"============================\"\r\necho \" Nitrox Installer Debug Info\"\r\necho \"============================\"\r\necho \"Architecture: ${_arch} (${ARCH_TAG})\"\r\necho \"Forced match: ${FORCE_ARCH}\"\r\necho \"Selected Version: $(echo \"$RELEASE_JSON\" | jq -r .tag_name)\"\r\necho \"Download URL: ${DOWNLOAD_URL}\"\r\necho \"============================\"\r\n\r\n# -----------------------------\r\n#  SteamCMD install\r\n# -----------------------------\r\ncd \/tmp\r\nmkdir -p \/mnt\/server\/steamcmd\r\ncurl -sSL -o steamcmd.tar.gz https:\/\/steamcdn-a.akamaihd.net\/client\/installer\/steamcmd_linux.tar.gz\r\ntar -xzf steamcmd.tar.gz -C \/mnt\/server\/steamcmd\r\ncd \/mnt\/server\/steamcmd\r\n\r\nexport HOME=\/mnt\/server\r\nmkdir -p \"$HOME\/subnautica\"\r\n\r\n## install game using steamcmd\r\n.\/steamcmd.sh +force_install_dir \/mnt\/server\/subnautica +login ${STEAM_USER} ${STEAM_PASS} ${STEAM_AUTH} $( [[ \"${WINDOWS_INSTALL}\" == \"1\" ]] && printf %s '+@sSteamCmdForcePlatformType windows' ) +app_update ${SRCDS_APPID} $( [[ -z ${SRCDS_BETAID} ]] || printf %s \"-beta ${SRCDS_BETAID}\" ) $( [[ -z ${SRCDS_BETAPASS} ]] || printf %s \"-betapassword ${SRCDS_BETAPASS}\" ) ${INSTALL_FLAGS} validate +quit ## other flags may be needed depending on install. looking at you cs 1.6\r\n\r\n# -----------------------------\r\n#  Download and Extract Nitrox\r\n# -----------------------------\r\nmkdir -p \"$HOME\/Nitrox\"\r\ncd \"$HOME\"\r\necho \"Downloading Nitrox from $DOWNLOAD_URL ...\"\r\ncurl -L \"$DOWNLOAD_URL\" -o Nitrox.zip\r\n\r\nunzip -q Nitrox.zip -d \"$HOME\/Nitrox\"\r\nrm Nitrox.zip\r\n\r\n# Flatten structure if GitHub added a wrapper dir\r\nFIRST_DIR=$(find \"$HOME\/Nitrox\" -mindepth 1 -maxdepth 1 -type d | head -n1)\r\nif [ -d \"$FIRST_DIR\/NitroxServer-Subnautica\" ]; then\r\n  echo \"Flattening Nitrox directory...\"\r\n  mv \"$FIRST_DIR\"\/* \"$HOME\/Nitrox\"\/\r\n  rm -rf \"$FIRST_DIR\"\r\nfi\r\n\r\n# Safe execute bits\r\nchmod +x \"$HOME\/Nitrox\"\/NitroxServer-Subnautica 2>\/dev\/null || true\r\n\r\n\r\n# -----------------------------\r\n#  Config template setup\r\n# -----------------------------\r\nmkdir -p \"$HOME\/.config\/Nitrox\"\r\nCONFIG_TEMPLATE=\"$HOME\/.config\/Nitrox\/server.cfg\"\r\n\r\nif [ ! -f \"$CONFIG_TEMPLATE\" ]; then\r\ncat <<EOT > \"$CONFIG_TEMPLATE\"\r\nCreateFullEntityCache=False\r\nServerPort=${SERVER_PORT:-11000}\r\nSaveInterval=120000\r\nDisableAutoSave=False\r\nServerPassword=${SUBNAUTICA_PASSWORD:-}\r\nAdminPassword=${SUBNAUTICA_ADMIN_PASSWORD:-PleaseChangeMe}\r\nGameMode=${SERVER_MODE:-SURVIVAL}\r\nAutoPortForward=False\r\nSerializerMode=JSON\r\nEOT\r\nfi\r\n\r\n# -----------------------------\r\n#  Per-Save Config Handling\r\n# -----------------------------\r\nSAVE_NAME=\"${SAVE_NAME:-world}\"\r\nSAVE_PATH=\"$HOME\/.config\/Nitrox\/saves\/${SAVE_NAME}\"\r\nSAVE_CFG=\"$SAVE_PATH\/server.cfg\"\r\n\r\necho \"Setting up save: ${SAVE_NAME}\"\r\nmkdir -p \"$SAVE_PATH\"\r\n\r\nif [ ! -f \"$SAVE_CFG\" ]; then\r\n  echo \"Creating save-specific config for ${SAVE_NAME}...\"\r\n  cp \"$CONFIG_TEMPLATE\" \"$SAVE_CFG\" || {\r\n    echo \"ERROR: Failed to copy config template\"\r\n    exit 1\r\n  }\r\nelse\r\n  echo \"Existing config found for ${SAVE_NAME}, skipping copy.\"\r\nfi\r\n\r\nif [ -f \"$SAVE_CFG\" ]; then\r\n  echo \"Save config ready: $SAVE_CFG\"\r\nelse\r\n  echo \"ERROR: Save config creation failed!\"\r\n  exit 1\r\nfi\r\n\r\n# -----------------------------\r\n#  Summary\r\n# -----------------------------\r\ncd \"$HOME\"\r\necho \"------------------------------------\"\r\necho \"Nitrox Server installation done!\"\r\necho \"Save Name: $SAVE_NAME\"\r\necho \"Game Path: $HOME\/subnautica\"\r\necho \"Server Path: $HOME\/Nitrox\"\r\necho \"------------------------------------\"",
            "container": "ghcr.io\/ptero-eggs\/installers:debian",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "APP ID",
            "description": "The ID corresponding to the game to download.",
            "env_variable": "SRCDS_APPID",
            "default_value": "264710",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|numeric|digits_between:1,6",
            "field_type": "text"
        },
        {
            "name": "Steam Username",
            "description": "Your Steam-Account SUername",
            "env_variable": "STEAM_USER",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:64",
            "field_type": "text"
        },
        {
            "name": "Steam Password",
            "description": "Your Steam Account Password",
            "env_variable": "STEAM_PASS",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:64",
            "field_type": "text"
        },
        {
            "name": "Steam Auth",
            "description": "Steam account auth code. Required if you have 2fa enabled",
            "env_variable": "STEAM_AUTH",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|max:6",
            "field_type": "text"
        },
        {
            "name": "Nitrox Version",
            "description": "Which version of Nitrox to install and use. Use the version e.g. 1.5.0.1 or latest for the newest release",
            "env_variable": "NITROX_VERSION",
            "default_value": "latest",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|between:3,12",
            "field_type": "text"
        },
        {
            "name": "Auto Save Interval",
            "description": "Time between auto saves specified in milliseconds",
            "env_variable": "SAVE_INTERVAL",
            "default_value": "120000",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|numeric|digits_between:6,7",
            "field_type": "text"
        },
        {
            "name": "Disable Auto Save",
            "description": "Disables Auto Save: False \/ True",
            "env_variable": "SAVE_DISABLE",
            "default_value": "False",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:True,False",
            "field_type": "text"
        },
        {
            "name": "Save Name",
            "description": "The save name for the server.",
            "env_variable": "SAVE_NAME",
            "default_value": "world",
            "user_viewable": true,
            "user_editable": true,
            "rules": "alpha_dash|between:1,100",
            "field_type": "text"
        },
        {
            "name": "Server Password",
            "description": "Password neccessary for connecting to the Server",
            "env_variable": "SUBNAUTICA_PASSWORD",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|between:3,12",
            "field_type": "text"
        },
        {
            "name": "Admin Password",
            "description": "If specified, players must provide this password to gain access to administrator commands on the server.",
            "env_variable": "SUBNAUTICA_ADMIN_PASSWORD",
            "default_value": "PleaseChangeMe",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|between:3,16",
            "field_type": "text"
        },
        {
            "name": "Game Mode",
            "description": "Game Mode setting: SURVIVAL, FREEDOM, HARDCORE, CREATIVE",
            "env_variable": "SERVER_MODE",
            "default_value": "SURVIVAL",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:SURVIVAL,FREEDOM,HARDCORE,CREATIVE",
            "field_type": "text"
        },
        {
            "name": "Auto Portforward via UPnP",
            "description": "If set to true, the server will try to open port on your router via UPnP",
            "env_variable": "PORTFORWARD_ENABLE",
            "default_value": "False",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|string|in:True,False",
            "field_type": "text"
        },
        {
            "name": "Serializer Mode",
            "description": "Switch between savegame formats.\r\nPossible values: PROTOBUF, JSON",
            "env_variable": "SERIALIZER_MODE",
            "default_value": "JSON",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|string|in:PROTOBUF,JSON",
            "field_type": "text"
        },
        {
            "name": "Subnautica Installation Path",
            "description": "Leave this as is",
            "env_variable": "SUBNAUTICA_INSTALLATION_PATH",
            "default_value": "\/home\/container\/subnautica",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string",
            "field_type": "text"
        },
        {
            "name": "XDG Config Home",
            "description": "Leave this as is",
            "env_variable": "XDG_CONFIG_HOME",
            "default_value": "\/home\/container\/.config",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string",
            "field_type": "text"
        },
        {
            "name": "WINDOWS_INSTALL",
            "description": "",
            "env_variable": "WINDOWS_INSTALL",
            "default_value": "1",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|string|max:20",
            "field_type": "text"
        }
    ]
}